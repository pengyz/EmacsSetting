;; java environment config (jdee maintain)
;; ===========================================================

(add-to-list 'load-path (concat plugin-path "/jdee/java/lib"))
(add-to-list 'load-path (concat plugin-path "/jdee/lisp"))
(add-to-list 'load-path (concat plugin-path "/elib"))
(require 'jde)  

;; If you want Emacs to defer loading the JDE until you open a  
;; Java file, edit the following line  
;; 不自动加载jde-mode  
(setq defer-loading-jde t)  
;; to read:  
;;  
;;  (setq defer-loading-jde t)  
;;  
;; 编辑.java文件时加载jde  
(if defer-loading-jde  
    (progn  
      (autoload 'jde-mode "jde" "JDE mode." t)  
      (setq auto-mode-alist  
			(append  
			 '(("\\.java\\'" . jde-mode))  
			 auto-mode-alist)))  
  (require 'jde))  


;;we need some lisp to prevent fatal errors.
(defun screen-width nil -1)
(setq jde-check-version-flag nil)
(define-obsolete-function-alias 'make-local-hook 'ignore "24.3")
(unless (fboundp 'semantic-format-prototype-tag-java-mode)
  (defalias 'semantic-format-prototype-tag-java-mode 'semantic-format-tag-prototype-java-mode))
(require 'hippie-exp)


(defun my-jde-mode-hook ()
  (setq c-basic-offset 2))
(add-hook 'jde-mode-hook 'my-jde-mode-hook) 
;; Include the following only if you want to run
;; bash as your shell. 
;; Setup Emacs to run bash as its primary shell.
(setq shell-file-name "bash")
(setq shell-command-switch "-c")
(setq explicit-shell-file-name shell-file-name)
(setenv "SHELL" shell-file-name)
(setq explicit-sh-args '("-login" "-i"))
(if (boundp 'w32-quote-process-args)
	(setq w32-quote-process-args ?\")) ;; Include only for MS Windows.

;; browser settings
(setq browse-url-browser-function 'browse-url-generic)
(setq browse-url-generic-program "chromium-browser")
(setq jde-gen-buffer-boilerplate 'nil)
(setq jde-complete-function 'jde-complete-menu)  
(setq jde-debugger '("jdb"))
(setq jde-db-option-connect-socket '(nil "9009"))
